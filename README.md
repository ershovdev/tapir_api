# Доска объявлений - API

Тестовое задание (API доски объявлений) в компанию Тапир.

---

## Стек

PHP 8  
Laravel 8 - докеризированный через Sail с небольшими допилами (XDebug из коробки в контейнере, автоматический запуск воркеров для очередей)  
Верстка - Bootstrap  
Очереди - Redis  
Дополнительно библиотеки - intervention/image для обработки изображений, laravel/telescope для отслеживания статуса джоб, mavinoo/laravel-batch - батч insert'ы и update'ы

## Возможности

1. API - создание и просмотр объявлений, все данные в запросах валидируются.
2. Создание объявлений - отложенная загрузка изображений в очередях, наличие статусов:
   * Ready - успешно загружено
   * Pending - в процессе загрузки
   * Failed - произошла ошибка записи, по ссылке находится не картинка или иная ошибка
3. Просмотр объявлений - через API или через интерфейс на сайте (в корне)
4. Артизан для просмотра всех объявлений или одного выбранного

## Запуск

Спулить репозиторий  

Из корня проекта:  
```
./vendor/bin/sail up
sudo chmod -R 777 ./
```

Ручная проверка статуса воркеров и запуск артизанов  
Из корня:
```
docker-compose exec laravel.test bash

supervisorctl status

php artisan adverts:show
// or
php artisan adverts:show {id}
```

## Ссылки

Swagger - `http://0.0.0.0/api/swagger`  
Список объявлений -  `http://0.0.0.0`  
API - `http://0.0.0.0/api`  
Telescope - `http://0.0.0.0/telescope`  


